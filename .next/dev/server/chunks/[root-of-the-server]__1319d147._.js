module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[project]/lib/supabase.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// FIX: Ensure this file is never bundled to the client
__turbopack_context__.s([
    "supabase",
    ()=>supabase
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$server$2d$only$2f$empty$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/server-only/empty.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$esm$2f$wrapper$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@supabase/supabase-js/dist/esm/wrapper.mjs [app-route] (ecmascript)");
;
;
// Supabase configuration
const supabaseUrl = ("TURBOPACK compile-time value", "https://amslnjnjonxxinzvhicl.supabase.co");
const supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;
if (!supabaseUrl || !supabaseServiceRoleKey) {
    throw new Error("Missing Supabase environment variables");
}
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$esm$2f$wrapper$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createClient"])(supabaseUrl, supabaseServiceRoleKey, {
    auth: {
        autoRefreshToken: false,
        persistSession: false,
        detectSessionInUrl: false
    }
});
}),
"[project]/lib/db.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "advancedQuery",
    ()=>advancedQuery,
    "count",
    ()=>count,
    "deleteRecord",
    ()=>deleteRecord,
    "getById",
    ()=>getById,
    "insert",
    ()=>insert,
    "query",
    ()=>query,
    "testConnection",
    ()=>testConnection,
    "update",
    ()=>update
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/supabase.ts [app-route] (ecmascript)");
;
async function query(table, filters) {
    try {
        let queryBuilder = __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from(table).select('*');
        // Apply filters if provided
        if (filters) {
            Object.entries(filters).forEach(([key, value])=>{
                if (value !== undefined && value !== null) {
                    queryBuilder = queryBuilder.eq(key, value);
                }
            });
        }
        const { data, error } = await queryBuilder;
        if (error) {
            console.error(`Query error on ${table}:`, error.message || error);
            return {
                data: null,
                error
            };
        }
        return {
            data: data,
            error: null
        };
    } catch (error) {
        console.error(`Unexpected error querying ${table}:`, error);
        return {
            data: null,
            error
        };
    }
}
async function insert(table, data) {
    try {
        const { data: insertedData, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from(table).insert(data).select().single();
        if (error) {
            console.error(`Insert error on ${table}:`, error);
            return {
                data: null,
                error
            };
        }
        return {
            data: insertedData,
            error: null
        };
    } catch (error) {
        console.error(`Unexpected error inserting into ${table}:`, error);
        return {
            data: null,
            error
        };
    }
}
async function update(table, id, updates) {
    try {
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from(table).update(updates).eq('id', id).select().single();
        if (error) {
            console.error(`Update error on ${table}:`, error);
            return {
                data: null,
                error
            };
        }
        return {
            data: data,
            error: null
        };
    } catch (error) {
        console.error(`Unexpected error updating ${table}:`, error);
        return {
            data: null,
            error
        };
    }
}
async function deleteRecord(table, id) {
    try {
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from(table).delete().eq('id', id);
        if (error) {
            console.error(`Delete error on ${table}:`, error);
            return {
                success: false,
                error
            };
        }
        return {
            success: true,
            error: null
        };
    } catch (error) {
        console.error(`Unexpected error deleting from ${table}:`, error);
        return {
            success: false,
            error
        };
    }
}
async function getById(table, id) {
    try {
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from(table).select('*').eq('id', id).single();
        if (error) {
            console.error(`GetById error on ${table}:`, error);
            return {
                data: null,
                error
            };
        }
        return {
            data: data,
            error: null
        };
    } catch (error) {
        console.error(`Unexpected error getting record from ${table}:`, error);
        return {
            data: null,
            error
        };
    }
}
async function count(table, filters) {
    try {
        let queryBuilder = __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from(table).select('*', {
            count: 'exact',
            head: true
        });
        // Apply filters if provided
        if (filters) {
            Object.entries(filters).forEach(([key, value])=>{
                queryBuilder = queryBuilder.eq(key, value);
            });
        }
        const { count, error } = await queryBuilder;
        if (error) {
            console.error(`Count error on ${table}:`, error);
            return {
                count: null,
                error
            };
        }
        return {
            count,
            error: null
        };
    } catch (error) {
        console.error(`Unexpected error counting ${table}:`, error);
        return {
            count: null,
            error
        };
    }
}
async function advancedQuery(options) {
    try {
        let queryBuilder = __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from(options.table).select(options.select || '*', {
            count: 'exact'
        });
        // Apply filters
        if (options.filters) {
            Object.entries(options.filters).forEach(([key, value])=>{
                if (value !== undefined && value !== null) {
                    queryBuilder = queryBuilder.eq(key, value);
                }
            });
        }
        // Apply sorting
        if (options.orderBy) {
            queryBuilder = queryBuilder.order(options.orderBy.column, {
                ascending: options.orderBy.ascending ?? false
            });
        }
        // Apply pagination
        if (options.limit !== undefined) {
            queryBuilder = queryBuilder.limit(options.limit);
        }
        if (options.offset !== undefined) {
            queryBuilder = queryBuilder.range(options.offset, options.offset + (options.limit || 10) - 1);
        }
        const { data, error, count } = await queryBuilder;
        if (error) {
            console.error(`Advanced query error on ${options.table}:`, error);
            return {
                data: null,
                error,
                count: undefined
            };
        }
        return {
            data: data,
            error: null,
            count: count ?? undefined
        };
    } catch (error) {
        console.error(`Unexpected error in advanced query:`, error);
        return {
            data: null,
            error,
            count: undefined
        };
    }
}
async function testConnection() {
    try {
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["supabase"].from('leads').select('count').limit(1);
        // PGRST205 means table doesn't exist - but connection works!
        if (error && error.code !== 'PGRST205') {
            console.error('Database connection test failed:', error);
            return false;
        }
        // If error is PGRST205, connection is working, tables just don't exist yet
        if (error && error.code === 'PGRST205') {
            console.log('✅ Database connected (tables not created yet)');
            return true;
        }
        console.log('✅ Database connection successful');
        return true;
    } catch (error) {
        console.error('Database connection test error:', error);
        return false;
    }
}
}),
"[project]/app/api/admin/leads/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GET",
    ()=>GET
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/db.ts [app-route] (ecmascript)");
;
;
async function GET() {
    try {
        // This uses the Admin client from lib/db, bypassing security rules (RLS)
        const { data: leads, error } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$db$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["query"])("leads");
        if (error) {
            console.error("Database Error:", error);
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: error.message
            }, {
                status: 500
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            leads: leads || []
        }, {
            status: 200
        });
    } catch (error) {
        console.error("Admin Leads API Error:", error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Internal Server Error"
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__1319d147._.js.map