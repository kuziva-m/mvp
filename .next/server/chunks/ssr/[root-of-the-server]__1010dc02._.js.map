{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kuziv/Desktop/Desktop%20Folders/Client%20Projects/MVp/mvp-web-agency/app/actions/auth-mock.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { cookies } from \"next/headers\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nexport async function selectBusiness(userId: string) {\r\n  const cookieStore = await cookies();\r\n\r\n  cookieStore.set(\"mock_user_id\", userId, {\r\n    path: \"/\",\r\n    httpOnly: true,\r\n    maxAge: 60 * 60 * 24 * 7, // 1 week\r\n  });\r\n\r\n  redirect(\"/admin/dashboard\");\r\n}\r\n\r\nexport async function logoutBusiness() {\r\n  const cookieStore = await cookies();\r\n  cookieStore.delete(\"mock_user_id\");\r\n  redirect(\"/select-business\");\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;;;;;AAEO,eAAe,eAAe,MAAc;IACjD,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,YAAY,GAAG,CAAC,gBAAgB,QAAQ;QACtC,MAAM;QACN,UAAU;QACV,QAAQ,KAAK,KAAK,KAAK;IACzB;IAEA,IAAA,iMAAQ,EAAC;AACX;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;IACnB,IAAA,iMAAQ,EAAC;AACX;;;IAhBsB;IAYA;;AAZA,+OAAA;AAYA,+OAAA","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kuziv/Desktop/Desktop%20Folders/Client%20Projects/MVp/mvp-web-agency/app/admin/leads/actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\n// MOCK SCRAPER: Simulates analyzing a website\r\nexport async function scrapeWebsite(url: string) {\r\n  // Simulate network delay (1.5s)\r\n  await new Promise((resolve) => setTimeout(resolve, 1500));\r\n\r\n  // Return mock data based on the URL\r\n  const domain = url\r\n    .replace(\"https://\", \"\")\r\n    .replace(\"http://\", \"\")\r\n    .split(\"/\")[0];\r\n\r\n  return {\r\n    success: true,\r\n    data: {\r\n      business_name: domain.split(\".\")[0].toUpperCase() + \" Inc.\",\r\n      logo_url: `https://logo.clearbit.com/${domain}`,\r\n      industry: \"Technology\", // Default guess\r\n      email: `contact@${domain}`,\r\n      phone: \"+1 (555) 123-4567\",\r\n    },\r\n  };\r\n}\r\n\r\nexport async function createLead(formData: FormData) {\r\n  const supabase = await createClient();\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser();\r\n\r\n  if (!user) return { error: \"Unauthorized\" };\r\n\r\n  const leadData = {\r\n    user_id: user.id,\r\n    business_name: formData.get(\"businessName\"),\r\n    website: formData.get(\"website\"),\r\n    email: formData.get(\"email\"),\r\n    phone: formData.get(\"phone\"),\r\n    industry: formData.get(\"industry\") || \"Unknown\",\r\n    source: formData.get(\"source\") || \"Manual\",\r\n    status: \"new\",\r\n    quality_score: 50,\r\n    logo_url: formData.get(\"logoUrl\"),\r\n  };\r\n\r\n  const { error } = await supabase.from(\"leads\").insert(leadData);\r\n\r\n  if (error) return { error: error.message };\r\n\r\n  revalidatePath(\"/admin/leads\");\r\n  return { success: true };\r\n}\r\n\r\nexport async function updateLeadStatus(id: string, status: string) {\r\n  const supabase = await createClient();\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser();\r\n  if (!user) return { error: \"Unauthorized\" };\r\n\r\n  // 1. Update the Lead Status\r\n  const { error } = await supabase\r\n    .from(\"leads\")\r\n    .update({ status })\r\n    .eq(\"id\", id);\r\n\r\n  if (error) return { error: error.message };\r\n\r\n  // 2. AUTOMATIC SUBSCRIPTION LOGIC\r\n  // If moving to 'subscriber', check if subscription exists, if not create one.\r\n  if (status === \"subscriber\") {\r\n    const { data: existingSub } = await supabase\r\n      .from(\"subscriptions\")\r\n      .select(\"id\")\r\n      .eq(\"lead_id\", id)\r\n      .single();\r\n\r\n    if (!existingSub) {\r\n      await supabase.from(\"subscriptions\").insert({\r\n        user_id: user.id,\r\n        lead_id: id,\r\n        status: \"active\",\r\n        plan_name: \"Standard Plan\", // Default\r\n        amount: 99.0, // Default\r\n        billing_cycle: \"monthly\", // Default\r\n      });\r\n    }\r\n  }\r\n\r\n  revalidatePath(\"/admin/leads\");\r\n  return { success: true };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;AAGO,eAAe,cAAc,GAAW;IAC7C,gCAAgC;IAChC,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,oCAAoC;IACpC,MAAM,SAAS,IACZ,OAAO,CAAC,YAAY,IACpB,OAAO,CAAC,WAAW,IACnB,KAAK,CAAC,IAAI,CAAC,EAAE;IAEhB,OAAO;QACL,SAAS;QACT,MAAM;YACJ,eAAe,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,KAAK;YACpD,UAAU,CAAC,0BAA0B,EAAE,QAAQ;YAC/C,UAAU;YACV,OAAO,CAAC,QAAQ,EAAE,QAAQ;YAC1B,OAAO;QACT;IACF;AACF;AAEO,eAAe,WAAW,QAAkB;IACjD,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM,OAAO;QAAE,OAAO;IAAe;IAE1C,MAAM,WAAW;QACf,SAAS,KAAK,EAAE;QAChB,eAAe,SAAS,GAAG,CAAC;QAC5B,SAAS,SAAS,GAAG,CAAC;QACtB,OAAO,SAAS,GAAG,CAAC;QACpB,OAAO,SAAS,GAAG,CAAC;QACpB,UAAU,SAAS,GAAG,CAAC,eAAe;QACtC,QAAQ,SAAS,GAAG,CAAC,aAAa;QAClC,QAAQ;QACR,eAAe;QACf,UAAU,SAAS,GAAG,CAAC;IACzB;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,CAAC;IAEtD,IAAI,OAAO,OAAO;QAAE,OAAO,MAAM,OAAO;IAAC;IAEzC,IAAA,+IAAc,EAAC;IACf,OAAO;QAAE,SAAS;IAAK;AACzB;AAEO,eAAe,iBAAiB,EAAU,EAAE,MAAc;IAC/D,MAAM,WAAW,MAAM,IAAA,yIAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAC/B,IAAI,CAAC,MAAM,OAAO;QAAE,OAAO;IAAe;IAE1C,4BAA4B;IAC5B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,SACL,MAAM,CAAC;QAAE;IAAO,GAChB,EAAE,CAAC,MAAM;IAEZ,IAAI,OAAO,OAAO;QAAE,OAAO,MAAM,OAAO;IAAC;IAEzC,kCAAkC;IAClC,8EAA8E;IAC9E,IAAI,WAAW,cAAc;QAC3B,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,IACd,MAAM;QAET,IAAI,CAAC,aAAa;YAChB,MAAM,SAAS,IAAI,CAAC,iBAAiB,MAAM,CAAC;gBAC1C,SAAS,KAAK,EAAE;gBAChB,SAAS;gBACT,QAAQ;gBACR,WAAW;gBACX,QAAQ;gBACR,eAAe;YACjB;QACF;IACF;IAEA,IAAA,+IAAc,EAAC;IACf,OAAO;QAAE,SAAS;IAAK;AACzB;;;IAzFsB;IAsBA;IA6BA;;AAnDA,+OAAA;AAsBA,+OAAA;AA6BA,+OAAA","debugId":null}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kuziv/Desktop/Desktop%20Folders/Client%20Projects/MVp/mvp-web-agency/.next-internal/server/app/admin/leads/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logoutBusiness as '00104c1e859e67e008ede8afe9a80d4e5034fc7051'} from 'ACTIONS_MODULE0'\nexport {createLead as '40e4f19266c61b84849a13df5feff893b0a245fa74'} from 'ACTIONS_MODULE1'\nexport {scrapeWebsite as '40d686ca1f173c33b6af039fb50a79f71a4cba840c'} from 'ACTIONS_MODULE1'\nexport {updateLeadStatus as '608cdc95df2cc41f39e4035203ea0cd363e777ca6d'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kuziv/Desktop/Desktop%20Folders/Client%20Projects/MVp/mvp-web-agency/app/admin/leads/page.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/admin/leads/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/admin/leads/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA4R,GACzT,0DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kuziv/Desktop/Desktop%20Folders/Client%20Projects/MVp/mvp-web-agency/app/admin/leads/page.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/admin/leads/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/admin/leads/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwQ,GACrS,sCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}